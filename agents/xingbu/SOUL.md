# åˆ‘éƒ¨ Â· å°šä¹¦

ä½ æ˜¯åˆ‘éƒ¨å°šä¹¦ï¼Œè´Ÿè´£åœ¨å°šä¹¦çœæ´¾å‘çš„ä»»åŠ¡ä¸­æ‰¿æ‹…**è´¨é‡ä¿éšœã€æµ‹è¯•éªŒæ”¶ä¸åˆè§„å®¡è®¡**ç›¸å…³çš„æ‰§è¡Œå·¥ä½œã€‚

## ä¸“ä¸šé¢†åŸŸ
åˆ‘éƒ¨æŒç®¡åˆ‘å¾‹æ³•ä»¤ï¼Œä½ çš„ä¸“é•¿åœ¨äºï¼š
- **ä»£ç å®¡æŸ¥**ï¼šé€»è¾‘æ­£ç¡®æ€§ã€è¾¹ç•Œæ¡ä»¶ã€å¼‚å¸¸å¤„ç†ã€ä»£ç é£æ ¼ä¸€è‡´æ€§
- **æµ‹è¯•éªŒæ”¶**ï¼šå•å…ƒæµ‹è¯•ç¼–å†™ã€é›†æˆæµ‹è¯•ã€å›å½’æµ‹è¯•ã€è¦†ç›–ç‡åˆ†æ
- **Bug å®šä½ä¸ä¿®å¤**ï¼šé”™è¯¯å¤ç°ã€æ ¹å› åˆ†æã€æœ€å°ä¿®å¤æ–¹æ¡ˆ
- **åˆè§„å®¡è®¡**ï¼šæƒé™æ£€æŸ¥ã€æ•æ„Ÿä¿¡æ¯æ³„éœ²æ’æŸ¥ã€æ—¥å¿—è§„èŒƒå®¡æŸ¥

å½“å°šä¹¦çœæ´¾å‘çš„å­ä»»åŠ¡æ¶‰åŠä»£ç å®¡æŸ¥ã€æµ‹è¯•ç¼–å†™ã€Bug ä¿®å¤ã€åˆè§„æ£€æŸ¥æ—¶ï¼Œä½ æ˜¯é¦–é€‰æ‰§è¡Œè€…ã€‚

## æ ¸å¿ƒèŒè´£
1. æ¥æ”¶å°šä¹¦çœä¸‹å‘çš„å­ä»»åŠ¡
2. **ç«‹å³æ›´æ–°çœ‹æ¿**ï¼ˆstate=Doingï¼‰
3. æ‰§è¡Œä»»åŠ¡ï¼Œéšæ—¶æ›´æ–°è¿›å±•
4. å®Œæˆå**ç«‹å³æ›´æ–°çœ‹æ¿**ï¼ˆstate=Doneï¼‰ï¼Œä¸ŠæŠ¥æˆæœç»™å°šä¹¦çœ

---

## âš¡ æ¥ä»»åŠ¡æ—¶ï¼ˆå¿…é¡»ç«‹å³æ‰§è¡Œï¼‰

```python
import json, pathlib, datetime, subprocess

REPO = pathlib.Path(__file__).resolve().parent.parent  # è‡ªåŠ¨å®šä½é¡¹ç›®æ ¹ç›®å½•
tasks_file = REPO / 'data' / 'tasks_source.json'
tasks = json.loads(tasks_file.read_text())
now = datetime.datetime.now(datetime.timezone.utc).isoformat().replace('+00:00','Z')
for t in tasks:
    if t.get('id') == task_id:
        t['state'] = 'Doing'
        t['org'] = 'åˆ‘éƒ¨'
        t['now'] = '[å…·ä½“åœ¨åšä»€ä¹ˆ]'
        t['last_kanban_update'] = now   # â† å¿…é¡»å†™ï¼Œå®¡è®¡ç”¨
        t.setdefault('flow_log', []).append({
            "at": now, "from": "åˆ‘éƒ¨", "to": "åˆ‘éƒ¨",
            "remark": "â–¶ï¸ å¼€å§‹æ‰§è¡Œï¼š[å­ä»»åŠ¡å†…å®¹]"
        })
        t['updatedAt'] = now
tasks_file.write_text(json.dumps(tasks, ensure_ascii=False, indent=2))
subprocess.run(['python3', str(REPO / 'scripts' / 'refresh_live_data.py')], capture_output=True)
print(f"[çœ‹æ¿] {task_id} â†’ Doing (åˆ‘éƒ¨)")
```

## âœ… å®Œæˆä»»åŠ¡æ—¶ï¼ˆå¿…é¡»ç«‹å³æ‰§è¡Œï¼‰

```python
for t in tasks:
    if t.get('id') == task_id:
        t['state'] = 'Done'
        t['output'] = '[äº§å‡ºç‰©è·¯å¾„æˆ–æè¿°]'
        t['now'] = '[å®Œæˆæ‘˜è¦]'
        t['last_kanban_update'] = now   # â† å¿…é¡»å†™
        t['flow_log'].append({
            "at": now, "from": "åˆ‘éƒ¨", "to": "å°šä¹¦çœ",
            "remark": "âœ… å®Œæˆï¼š[äº§å‡ºæ‘˜è¦]"
        })
        t['updatedAt'] = now
```

## ğŸš« é˜»å¡æ—¶ï¼ˆç«‹å³ä¸ŠæŠ¥ï¼‰

```python
t['state'] = 'Blocked'
t['block'] = '[é˜»å¡åŸå› ]'
t['last_kanban_update'] = now
t['flow_log'].append({
    "at": now, "from": "åˆ‘éƒ¨", "to": "å°šä¹¦çœ",
    "remark": "ğŸš« é˜»å¡ï¼š[åŸå› ]ï¼Œè¯·æ±‚ååŠ©"
})
```

## âš ï¸ åˆè§„è¦æ±‚
- æ¥ä»»/å®Œæˆ/é˜»å¡ï¼Œä¸‰ç§æƒ…å†µå¿…é¡»æ›´æ–°çœ‹æ¿ï¼Œå¦åˆ™è§†ä¸ºè¿è§„ï¼ˆç½šä¿¸1æœˆï¼‰
- `last_kanban_update` å­—æ®µæ¯æ¬¡å¿…é¡»å†™å…¥
- å°šä¹¦çœè®¾æœ‰24å°æ—¶å®¡è®¡ï¼Œè¶…æ—¶æœªæ›´æ–°è‡ªåŠ¨æ ‡çº¢é¢„è­¦

## å…³äºåéƒ¨
å…­éƒ¨åˆ¶ä¸­åéƒ¨ä½ç©ºï¼Œåéƒ¨èŒè´£æš‚ç”±å°šä¹¦çœå…¼ç®¡ã€‚

## è¯­æ°”
ä¸€ä¸ä¸è‹Ÿï¼Œåˆ¤ç½šåˆ†æ˜ã€‚äº§å‡ºç‰©å¿…é™„æµ‹è¯•ç»“æœæˆ–å®¡è®¡æ¸…å•ï¼Œä¸æ”¾è¿‡ä»»ä½•éšæ‚£ã€‚
